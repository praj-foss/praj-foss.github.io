<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-154882046-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-154882046-1');
    </script>

    <meta charset="utf-8"/>
    <title>Raj&#39;s Blog: Zimbra Mailbot: Update 1</title>
    
<meta name="keywords" content="Telegram,Non Tech,GraalVM,Web Dev,Packaging,LLVM,SWT,ModiTect,Zimbra Mailbot,Unix,Clojure,OpenGL,Native,GSoC,Java,Gradle,Terasology">

<meta name="description" content="My college exclusively uses Zimbra 8 as its mail server and the most annoying part is that there&#39;s no easy way to fetch new emails automatically (unlike Gmail app). The unavailability of any official Android app only makes it worse. So it&#39;s been a while since I started working on this chatbot that can forward emails from any Zimbra account to Telegram. On a side note, it&#39;s also helping me sharpen my Clojure skills for web dev.">

<meta property="og:description" content="My college exclusively uses Zimbra 8 as its mail server and the most annoying part is that there&#39;s no easy way to fetch new emails automatically (unlike Gmail app). The unavailability of any official Android app only makes it worse. So it&#39;s been a while since I started working on this chatbot that can forward emails from any Zimbra account to Telegram. On a side note, it&#39;s also helping me sharpen my Clojure skills for web dev.">

<meta property="og:url" content="https://praj.in/posts/2020/zimbra-mailbot-update-1/" />
<meta property="og:title" content="Zimbra Mailbot: Update 1" />
<meta property="og:type" content="article" />

    <link rel="canonical" href="https://praj.in/posts/2020/zimbra-mailbot-update-1/">
    <meta name="viewport" content="width=device-width, initial-scale=1">    

    <link href="https://fonts.googleapis.com/css2?family=Montserrat&family=Source+Sans+Pro&family=Source+Code+Pro&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>

    <link href="/css/screen.css" rel="stylesheet" type="text/css" />
    <link href="/css/prism.css" rel="stylesheet" type="text/css" />
</head>
<body>


<nav class="navbar navbar-default">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Raj&#39;s Blog</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-right">
                
                <li
                >
                <a href="/about/">About</a>
                </li>
                
                <li
                >
                <a href="/projects/">Projects</a>
                </li>
                
                <li ><a href="/archives/">Archives</a></li>
                <li><a href="/feed.xml"><i class="fa fa-rss" aria-hidden="true"></i></a></li>
            </ul>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div id="holder" class="container">
    <div class="row">
        <div class="col-lg-12">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">13 August 2020</div>
        
    </div>
    <h2>Zimbra Mailbot: Update 1</h2>
</div>
<div>
    
    <p>My college exclusively uses Zimbra 8 as its mail server and the most annoying part is that there's no easy way to fetch new emails automatically (unlike Gmail app). The unavailability of any official Android app only makes it worse. So it's been a while since I started working on <a href="https://github.com/praj-foss/zimbramailbot">this chatbot</a> that can forward emails from any Zimbra account to Telegram. On a side note, it's also helping me sharpen my Clojure skills for web dev.</p><!--more--><h2 id="the-plan">The Plan</h2><p>The primary mode of accessing Zimbra is via an old-fashioned web app. While it's good enough for casual email management, I find the lack of an auto-updating inbox really annoying, i.e., you need to open the web app and check for new emails every time. Luckily they also have REST, GraphQL, and SOAP APIs to use their web service and I figured out how I could make a Telegram chatbot that could fetch emails from my Zimbra regularly. One more important feature is how Zimbra's own bot account (a.k.a <em>The Postmaster</em>) can send notification emails to a secondary email id. You can set it up to receive a notification mail ("New message received at ... ") on your Gmail each time your Zimbra receives something. Although it doesn't forward the actual content of the mail, it's the closest feature you can get to an auto-syncing inbox.
<img src="/img/2020/zmb-1.png" alt="diagram" /></p><p>Making use of these notifications, the bot could reactively fetch new mails from Zimbra, making things more efficient than a usual polling strategy. I'll be continuing with their SOAP API since it's more mature and well documented. Under the hood, the bot is a usual web application that keeps responding to messages sent by the user. The bot should do the following:</p><ol><li>Fetch the Zimbra auth token from the user</li><li>Configure Zimbra to notify bot's custom mail server</li><li>On receiving a notification, fetch new mail from Zimbra</li><li>Format and forward the mail to user's Telegram</li></ol><p>Telegram's <a href="https://core.telegram.org/bots/api">Bot API</a> is heavily documented as well, making it fun to build great bots from scratch. One Google search can find a ton of articles on how to get started.</p><h2 id="current-status">Current status</h2><p>It just reached <em>0.0.5</em> and this pre-alpha bot is already online replying to basic commands, although it's not connectable to Zimbra yet. It's also the first project where I'm seriously moving with <em>Test Driven Developement</em>, and it's been awesome so far. It should be noted that I've planned it to be compatible with any Zimbra 8 server, not just the one from my college. The roadmap is split something like this:</p><ul><li><em>0.1.0</em>: A dummy chatbot running online, CI/CD and a better domain</li><li><em>0.2.0</em>: Full compatibility with Zimbra 8, own mail server</li><li><em>0.3.0</em>: Postgres setup, fault-tolerant and ready for beta testing</li></ul><p>The project is written completely in Clojure and the server is built using <a href="https://github.com/ring-clojure/ring">ring</a> and <a href="https://github.com/weavejester/compojure">compojure</a> on top of <a href="https://github.com/http-kit/http-kit">http-kit</a>. It makes use of <a href="https://github.com/clojure/core.async">core.async</a> channels to have a very concurrent architecture. Here's a screenshot of me talking to <a href="https://t.me/zimbramailbot">@zimbramailbot</a>:
<img src="/img/2020/zmb-2.png" alt="screenshot" /></p><p>I'm yet to set up a custom domain for it, but it'd all be done before next minor release. Finally, a big thanks to <a href="https://www.alwaysdata.com/en/">alwaysdata</a> for their awesome free plan. Don't forget to check out their great IPv6-ready PaaS offers.</p><p>üö£‚Äç‚ôÇÔ∏è</p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags/Telegram/">Telegram</a>
    
    <a href="/tags/Web Dev/">Web Dev</a>
    
    <a href="/tags/Zimbra Mailbot/">Zimbra Mailbot</a>
    
    <a href="/tags/Clojure/">Clojure</a>
    
</div>


    <div id="prev-next">
        
        <a id="prev" href="/posts/2020/calling-uname-from-java-using-graalvm/">&larr; Calling uname from Java using GraalVM</a>
        
        
        <a id="next" href="/posts/2020/self-contained-native-looking-apps/">Self-contained, native-looking apps with SWT and ModiTect &rarr;</a>
        
    </div>
    
    
    <div id="comments">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
            var disqus_config = function () {
                this.page.url = "https://praj.in/posts/2020/zimbra-mailbot-update-1/";
                this.page.identifier = "Zimbra Mailbot: Update 1";
            };
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//praj-in.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
    </div>
    
</div>

            </div>
        </div>
    </div>
</div>

<footer>Copyright <i class="fa fa-copyright" aria-hidden="true"></i> 2020 Priyadarshi Raj
    <p style="text-align: center;">Powered by <a href="https://cryogenweb.org">Cryogen</a></p>
</footer>

<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script>twemoji.parse(document.getElementById("content"));</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/components/prism-core.min.js" integrity="sha256-9h14mWYYiQGkeAKg2JtijbqApb56kgw57WN6sI6dwH0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.20.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha256-3S2PESHNt0YNL65z57WuHPHIv12fibpBDXepyCGHftw=" crossorigin="anonymous"></script>



</body>
</html>
